<main>
  <!-- Fundo -->
  <app-container
    class="flex flex-col max-w-[550px] mx-auto m-4 mt-[16rem] justify-center login-container fade-in"
  >
    <!-- Login Form -->
    <form #loginForm="ngForm" (ngSubmit)="onLogin(loginForm)">
      <div
        class="flex flex-col justify-center items-center border border-gray-300 p-8 rounded-lg space-y-6 shadow-md"
      >
        <h1 class="text-2xl text-center font-bold mb-6">Entre com sua conta</h1>

        <div class="w-full flex flex-col space-y-2">
          <!-- <label for="username" class="sr-only">Nome de usuário</label> -->
          <input
            id="username"
            name="username"
            [(ngModel)]="user.username"
            class="text-gray-500 w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:outline-none focus:ring-2 focus:ring-black transition duration-200"
            [ngClass]="{
              'border-red-600 focus:ring-red-600':
                usernameRef.invalid &&
                (usernameRef.dirty || usernameRef.touched)
            }"
            placeholder="Usuário"
            required
            type="text"
            #usernameRef="ngModel"
            aria-label="Nome de usuário"
            [attr.aria-describedby]="
              usernameRef.invalid && (usernameRef.dirty || usernameRef.touched)
                ? 'username-error'
                : null
            "
          />
          <div
            *ngIf="
              usernameRef.invalid && (usernameRef.dirty || usernameRef.touched)
            "
            class="text-red-600 text-sm"
            id="username-error"
          >
            <span *ngIf="usernameRef.errors?.['required']">
              Nome de usuário é obrigatório.
            </span>
          </div>
        </div>

        <div class="w-full flex flex-col space-y-2">
          <!-- <label for="password" class="sr-only">Senha</label> -->
          <div class="relative">
            <input
              id="password"
              name="password"
              [(ngModel)]="user.password"
              class="text-gray-500 w-full px-4 py-3 border border-gray-300 rounded-lg outline-none focus:outline-none focus:ring-2 focus:ring-black transition duration-200"
              [ngClass]="{
                'border-red-600 focus:ring-red-600':
                  passwordRef.invalid &&
                  (passwordRef.dirty || passwordRef.touched)
              }"
              placeholder="Senha"
              required
              type="{{ isPasswordVisible ? 'text' : 'password' }}"
              #passwordRef="ngModel"
              autocomplete="off"
              aria-label="Senha"
              [attr.aria-describedby]="
                passwordRef.invalid &&
                (passwordRef.dirty || passwordRef.touched)
                  ? 'password-error'
                  : null
              "
            />
            <mat-icon
              class="absolute top-3.5 right-5"
              (click)="togglePasswordVisibility()"
              aria-hidden="true"
            >
              {{ isPasswordVisible ? "visibility_off" : "visibility" }}
            </mat-icon>
          </div>
          <div
            *ngIf="
              passwordRef.invalid && (passwordRef.dirty || passwordRef.touched)
            "
            class="text-red-600 text-sm"
            id="password-error"
          >
            <span *ngIf="passwordRef.errors?.['required']">
              Senha é obrigatória.
            </span>
          </div>
        </div>

        <app-submit-button [loading]="loading"></app-submit-button>

        <div
          class="w-full flex flex-col items-center justify-center text-sm gap-2"
        >
          <p class="text-base text-gray-500">
            Não tem uma conta?
            <a
              routerLink="/register"
              class="text-blue-500 cursor-pointer hover:underline"
              >Registrar</a
            >
          </p>
          <p
            class="text-gray-500 text-base cursor-pointer transition ease-in hover:opacity-75"
            routerLink="/forgot-password"
          >
            Esqueci a Senha
          </p>
        </div>
      </div>
    </form>
  </app-container>
</main>
